<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenAI Image Generator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .section { margin-bottom: 30px; }
        img { max-width: 100%; height: auto; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>OpenAI Image Generator</h1>

    <div class="section">
        <h2>API Key</h2>
        <input type="password" id="apiKey" placeholder="Enter your OpenAI API key" style="width: 300px;">
    </div>

    <div class="section">
        <h2>Text to Image</h2>
        <textarea id="textPrompt" rows="4" cols="50" placeholder="Describe the image you want..."></textarea><br>
        <button onclick="generateFromText()">Generate</button>
        <div id="textResult"></div>
    </div>

    <div class="section">
        <h2>Image to Image</h2>
        <input type="file" id="imageUpload" accept="image/*"><br>
        <button onclick="generateFromImage()">Generate Variation</button>
        <div id="imageResult"></div>
    </div>

    <script>
    async function generateFromText() {
        const apiKey = document.getElementById('apiKey').value;
        const prompt = document.getElementById('textPrompt').value;
        if (!apiKey || !prompt) return alert('API key and prompt required.');

        const response = await fetch('https://api.openai.com/v1/images/generations', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + apiKey
            },
            body: JSON.stringify({ prompt, n: 1, size: '512x512' })
        });

        const data = await response.json();
        const url = data.data && data.data[0] ? data.data[0].url : null;
        document.getElementById('textResult').innerHTML = url ? `<img src="${url}">` : 'No image generated.';
    }

    async function generateFromImage() {
        const apiKey = document.getElementById('apiKey').value;
        const fileInput = document.getElementById('imageUpload');
        if (!apiKey || fileInput.files.length === 0) return alert('API key and image required.');

        const formData = new FormData();
        formData.append('image', fileInput.files[0]);
        formData.append('n', '1');
        formData.append('size', '512x512');

        const response = await fetch('https://api.openai.com/v1/images/variations', {
            method: 'POST',
            headers: {
                'Authorization': 'Bearer ' + apiKey
            },
            body: formData
        });

        const data = await response.json();
        const url = data.data && data.data[0] ? data.data[0].url : null;
        document.getElementById('imageResult').innerHTML = url ? `<img src="${url}">` : 'No image generated.';
    }
    </script>
</body>
</html>
